!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@dicebear/avatars")):"function"==typeof define&&define.amd?define(["exports","@dicebear/avatars"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).DiceBear=e.DiceBear||{},e.DiceBear.Initials={}),e.DiceBear)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o={title:"Options",$schema:"http://json-schema.org/draft-07/schema#",properties:{backgroundColors:{title:"Background Colors",type:"array",items:{type:"string",enum:["amber","blue","blueGrey","brown","cyan","deepOrange","deepPurple","green","grey","indigo","lightBlue","lightGreen","lime","orange","pink","purple","red","teal","yellow"]}},backgroundColorLevel:{title:"Background Color Level",default:600,type:"integer",enum:[50,100,200,300,400,500,600,700,800,900]},fontSize:{title:"Font Size",type:"integer",minimum:1,maximum:100,default:50},chars:{title:"Chars",type:"number",minimum:0,maximum:2,default:2},bold:{title:"Bold",type:"boolean"}},additionalProperties:!1},l=h;h.addTo=function(e,t){return e?"string"==typeof e?function(e,t){return k(v(e,t))}(e,S(t)):function(e,t){return x(e,t).map(k)}(e,S(t)):""},h.parse=function(e,t){return e?"string"==typeof e?v(e,S(t)):x(e,S(t)):{}},h.find=h;var u=" -\\/:-@\\[-`\\{-\\~",c=/^[A-Z]+$/,f=/\(([^)]+)\)/,s=/^[^\s]+@[^\s]+$/,g=/@[^\s]+/,m=/[\w._-]+@[\w.-]+[\w]/g,p=new RegExp("(^|["+u+"])[^"+u+"]","g"),d=new RegExp("["+u+"]","g");function h(e,t){return e?"string"==typeof e?b(e,S(t)):y(e,S(t)):""}function b(e,t){var n,r,i,a=t.length||2;if(i=w(e,t))return i;if(!(e=C(e)))return"";if((n=e.match(p).map((function(e){return e[e.length-1]}))).length<2)return e.length>a?e.substr(0,a):e;if((r=n.join("")).length>=a)return r;for(var o=j(e),l=0;l<o.length;l++)if(o[l].length>=a)return o[l]}function y(e,t){var n,r,i,a=[],o={},l={},u={},c=t.length||2;e.forEach((function(e){if(e||(e=""),!u[e])if(e.length<c)u[e]=[e];else{if(r=w(e,t))return o[r]=1,void(u[e]=[r]);i=j(e).filter((function(e){return e.length===c&&(o[e]&&(l[e]=1),o[e]=1,!0)})),u[e]=i}}));var f=[];for(var s in u)f.unshift(s);for(var g=f.length,m=0;m<g;m++){i=u[f[m]],a.push(i);for(var p=0;p<i.length;p++)l[i[p]]>0&&(l[i[p]]--,i.splice(p,1))}return n=a.map((function(e){return e.length})),0===n.length?e:0===Math.min.apply(null,n)?(t.length++,y(e,t)):e.map((function(e){return u[e][0]}))}function v(e,t){var n,r,i,a={};return e?((n=w(e,t))&&(e=(e=e.replace(c,"")).replace(f,"")),t.initials&&(n=t.initials),n||(n=b(e,t)),null!=(i=e.match(m))&&(r=i.pop()),r&&(e=e.replace(r,"")).trim()==="<"+r+">"&&(e="",n||(n=b(r,t))),(e=e.replace(d," ").trim())&&(a.name=e),n&&(a.initials=n),r&&(a.email=r),a):{}}function x(e,t){var n=y(e,t);return e.map((function(e,r){return t.existing[e]=n[r],v(e,t)}))}function k(e){return e.name||e.email?e.email?e.name?e.name+" ("+e.initials+") <"+e.email+">":e.email+" ("+e.initials+")":e.name+" ("+e.initials+")":e.initials}function C(e){return e=(e=s.test(e)?e.replace(g,""):e.replace(m,"")).replace(d," ").trim()}function w(e,t){var n;return t.existing[e]?t.existing[e]:c.test(e)?e:null!=(n=e.match(f))?n.pop():void 0}var A={};function j(e){var t,n=[];return e=C(e),A[e]?A[e].slice(0):(t=e.split(" ").map(O),n=(n=B(t)).sort((function(e,t){return e.length-t.length||n.indexOf(e)-n.indexOf(t)})),A[e]=n,n.slice(0))}function B(e){var t,n,r=e.shift();return e.length>0?(n=[],t=B(e),r.forEach((function(e){t.forEach((function(t){n.push(e+t)}))})),n):r}function O(e){for(var t=[];e.length;)t.unshift(e),e=e.substr(0,e.length-1);return t}function S(e){return e||(e={length:2}),"number"==typeof e&&(e={length:e}),e.length=Math.max(e.length||0,2),e.existing=e.existing||{},e}var E=l,z=function(e){var n,a,l=e.prng,u=e.options,c=t.utils.schema.defaults(o),f=[];u.background?(Array.isArray(u.background)?f.push.apply(f,i(u.background)):f.push(u.background),u.background=void 0):Object.keys(r.default.color.collection).forEach((function(e){if(void 0===u.backgroundColors||0===u.backgroundColors.length||-1!==u.backgroundColors.indexOf(e)){var t,n=r.default.color.collection[e];f.push(n[null!==(t=u.backgroundColorLevel)&&void 0!==t?t:c.backgroundColorLevel])}}));var s=l.pick(f),g=E(l.seed.trim()).toLocaleUpperCase().slice(0,null!==(n=u.chars)&&void 0!==n?n:c.chars),m=(null!==(a=u.fontSize)&&void 0!==a?a:c.fontSize)/100,p=['<rect width="1" height="1" fill="'.concat(s,'"></rect>'),u.margin?'<g transform="translate('.concat(u.margin/100,", ").concat(u.margin/100,')">'):"",u.margin?'<g transform="scale('.concat(1-2*u.margin/100,')">'):"",'<text x="50%" y="50%" style="'.concat(u.bold?"font-weight: bold;":""," font-family: ").concat("Arial,sans-serif","; font-size: ").concat(m,'px" fill="#FFF" text-anchor="middle" dy="').concat((.356*m).toFixed(3),'">').concat(g,"</text>"),u.margin?"</g>":"",u.margin?"</g>":""].join("");return u.margin=void 0,{attributes:{viewBox:"0 0 1 1"},body:p}},F={title:"Initials",creator:"Florian KÃ¶rner",source:"https://github.com/dicebear/dicebear",license:{name:"CC0 1.0",url:"https://creativecommons.org/publicdomain/zero/1.0/"}},L=o,I=t.utils.style.createLegacyWrapper({create:z,meta:F,schema:L});e.create=z,e.default=I,e.meta=F,e.schema=L,Object.defineProperty(e,"__esModule",{value:!0})}));
